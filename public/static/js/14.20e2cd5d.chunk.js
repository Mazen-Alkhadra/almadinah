(this.webpackJsonpal_madinah=this.webpackJsonpal_madinah||[]).push([[14],{740:function(e,t,a){"use strict";var o=a(762),l=a(763),n=a(26),r=a(779),c=a.n(r),i=a(780),s=a.n(i);t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=new s.a.Workbook,i=r.addWorksheet(n.a.t("DataGrid"));Object(o.exportDataGrid)({component:e.component,worksheet:i,customizeCell:function(e){var o=e.gridCell,r=e.excelCell;if("data"===o.rowType){var c=a.find((function(e){return o.column.dataField===e.name}));c&&o.value&&(r.value=o.value.map((function(e){return c.data.find((function(t){return t[c.fieldName1]===e[c.fieldName2]}))[c.displayName]})).join()),t.find((function(e){return o.column.dataField===e}))&&(r.value=Object(l.htmlToText)(o.value,{wordwrap:null})),"creatAt"===o.column.dataField&&(r.value=new Date(o.value).toDateString()),"isActive"===o.column.dataField&&(r.value=o.value?n.a.t("YES"):n.a.t("NO"))}"group"===o.rowType&&(r.fill={type:"pattern",pattern:"solid",fgColor:{argb:"BEDFE6"}}),"totalFooter"===o.rowType&&r.value&&(r.font.italic=!0)}}).then((function(){r.xlsx.writeBuffer().then((function(e){c()(new Blob([e],{type:"application/octet-stream"}),"DataGrid.xlsx")}))})),e.cancel=!0}},942:function(e,t,a){"use strict";a.r(t);var o=a(29),l=a.n(o),n=a(56),r=a(70),c=a(0),i=a(710),s=a(784),u=a(707),d=a(782),m=a(433),b=a(725),j=a.n(b),p=a(722),x=a.n(p),O=a(718),f=a(92),v=a(82),y=a(716),w=a(721),h=a(740),C=a(102),g=a(781),S=a(1),F=[{store:O.d,name:"customers"}];t.default=Object(C.b)((function(e){var t=e.customers,a=Object(m.a)().t,o=Object(c.useState)(null),O=Object(r.a)(o,2),C=O[0],F=O[1],E=Object(c.useState)(!1),T=Object(r.a)(E,2),k=T[0],I=T[1],D=Object(c.useState)(""),B=Object(r.a)(D,2),N=B[0],R=B[1],A=Object(c.useState)(!1),P=Object(r.a)(A,2),G=P[0],W=P[1],V=Object(c.useState)([]),_=Object(r.a)(V,2),z=_[0],L=_[1],M=function(e){L([e.row.data]),W(!0)},H=function(){W(!1),L([])},J=Object(c.useState)({customerId:null,from:new Date((new Date).getTime()-864e6),to:new Date}),q=Object(r.a)(J,1)[0],K=function(){var e=Object(n.a)(l.a.mark((function e(t){var a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(!0),R(""),F(null),e.prev=3,e.next=6,v.a.get("/user/reports/customer-balance",{params:t});case 6:a=e.sent,o=a.data.data,F(o),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),R(e.t0);case 14:return e.prev=14,I(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,11,14,17]])})));return function(t){return e.apply(this,arguments)}}(),U=function(e){"Summary"===e.name&&("start"===e.summaryProcess?e.totalValue=0:"calculate"===e.summaryProcess&&(e.value.billId?e.totalValue-=e.value.value:e.value.paymentId&&(e.totalValue+=e.value.value)))};return Object(S.jsxs)(i.a,{children:[Object(S.jsx)(f.d,{title:a("CustomerBalance")}),Object(S.jsxs)(i.a,{basic:!0,children:[Object(S.jsxs)(j.a,{colCount:3,formData:q,children:[Object(S.jsx)(b.Item,{dataField:"customerId",editorType:"dxSelectBox",label:{text:a("Customer")},editorOptions:{items:t,searchEnabled:!0,valueExpr:"idCustomer",displayExpr:"fullName"}}),Object(S.jsx)(b.Item,{dataField:"from",editorType:"dxDateBox",label:{text:a("From")},editorOptions:{showClearButton:!0}}),Object(S.jsx)(b.Item,{dataField:"to",editorType:"dxDateBox",label:{text:a("To")},editorOptions:{showClearButton:!0}})]}),Object(S.jsx)(s.a,{}),Object(S.jsx)(u.a,{primary:!0,fluid:!0,content:a("Generate"),onClick:function(){return K(q)},loading:k}),Object(S.jsx)(s.a,{})]}),N?Object(S.jsx)(f.b,{}):C?Object(S.jsx)(i.a,{basic:!0,children:Object(S.jsxs)(x.a,{dataSource:C,showBorders:!0,showColumnLines:!0,columnHidingEnabled:!0,wordWrapEnabled:!0,columnAutoWidth:!0,allowColumnResizing:!0,hoverStateEnabled:!0,allowColumnReordering:!0,stateStoring:{enabled:!0,type:"localStorage",storageKey:"BalanceDataGridConfigs"},onExporting:h.a,loadPanel:{indicatorSrc:y.a},onRowPrepared:function(e){"totalFooter"===e.rowType&&(e.rowElement.style.backgroundColor="rgba(150,20,70,0.3)"),"header"===e.rowType&&(e.rowElement.style.backgroundColor="rgba(55,20,33,0.3)",e.rowElement.style.color="brown",e.rowElement.style.fontWeight="bold"),"data"===e.rowType&&(e.data.billId?e.rowElement.style.backgroundColor="rgba(200,55,33,0.3)":e.data.paymentId&&(e.rowElement.style.backgroundColor="rgba(55,200,33,0.3)"))},onCellPrepared:function(e){if("totalFooter"===e.rowType){var t,a=null===(t=e.cellElement)||void 0===t?void 0:t.firstChild;a&&(a.style.color="purple")}},children:[Object(S.jsx)(p.Sorting,{mode:"multiple"}),Object(S.jsx)(p.Scrolling,{mode:"infinity"}),Object(S.jsx)(p.FilterRow,{visible:!0}),Object(S.jsx)(p.FilterPanel,{visible:!0}),Object(S.jsx)(p.SearchPanel,{visible:!0}),Object(S.jsx)(p.Column,{dataField:"at",dataType:"datetime",caption:a("CreatedAt"),sortIndex:0,sortOrder:"asc"}),Object(S.jsxs)(p.Column,{dataField:"customerId",caption:a("Customer"),children:[Object(S.jsx)(p.Lookup,{dataSource:t,displayExpr:"fullName",valueExpr:"idCustomer",allowClearing:!0}),Object(S.jsx)(p.RequiredRule,{})]}),Object(S.jsx)(p.Column,{dataField:"serialNumber",caption:a("SerialNumber")}),Object(S.jsx)(p.Column,{dataField:"value",caption:a("Value"),dataType:"number",format:w.a.DECIMAL_NUM_FORMAT}),Object(S.jsx)(p.Column,{dataField:"notic",caption:a("Notice")}),Object(S.jsx)(p.Column,{type:"buttons",caption:a("Actions"),children:Object(S.jsx)(p.Button,{hint:a("Records"),icon:"copy",onClick:M,visible:function(e){return e.row.data.billId}})}),Object(S.jsx)(p.Summary,{calculateCustomSummary:U,children:Object(S.jsx)(p.TotalItem,{name:"Summary",summaryType:"custom",displayFormat:"".concat(a("Balance"),": {0}"),valueFormat:{precision:2},showInColumn:"value"})}),Object(S.jsx)(p.Export,{enabled:!0}),Object(S.jsx)(d.a,{onClose:H,open:G,content:z[0]&&Object(S.jsx)(i.a,{basic:!0,children:Object(S.jsx)(g.a,{cell:z[0],isReadOnly:!0})}),closeIcon:!0,header:a("Records"),size:"fullscreen",centered:!0,closeOnDimmerClick:!1,style:{maxHeight:"95vh",overflow:"auto"}})]})}):void 0]})}),F)}}]);
//# sourceMappingURL=14.20e2cd5d.chunk.js.map